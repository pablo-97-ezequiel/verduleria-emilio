{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3">{{ 'Editar' if product else 'Nuevo' }} producto</h1>
<form method="post" enctype="multipart/form-data" class="row g-3">
  <div class="col-12 col-md-6">
    <label class="form-label">Nombre</label>
    <input name="name" value="{{ product.name if product }}" required class="form-control">
  </div>
  <div class="col-12 col-md-6">
    <label class="form-label">Categoría</label>
    <input name="category" value="{{ product.category if product }}" required class="form-control" placeholder="Frutas, Verduras, Otros...">
  </div>
  <div class="col-6 col-md-4">
    <label class="form-label">Tipo</label>
    <select name="kind" class="form-select">
      <option value="kg" {{ 'selected' if product and product.kind=='kg' }}>Por Kg</option>
      <option value="unit" {{ 'selected' if product and product.kind=='unit' }}>Por Unidad</option>
    </select>
  </div>
  <div class="col-6 col-md-4">
    <label class="form-label">Precio (por Kg / Unidad)</label>
    <input name="price" type="number" step="0.01" value="{{ product.price if product }}" required class="form-control">
  </div>
  <div class="col-6 col-md-2">
    <label class="form-label">Promo Cant.</label>
    <input name="promo_qty" type="number" step="0.25" value="{{ product.promo_qty if product }}" class="form-control" placeholder="ej 2">
  </div>
  <div class="col-6 col-md-2">
    <label class="form-label">Promo $</label>
    <input name="promo_price" type="number" step="0.01" value="{{ product.promo_price if product }}" class="form-control">
  </div>
  <div class="col-12">
    <label class="form-label">Imagen (URL estática)</label>
    <input name="image" value="{{ product.image if product }}" class="form-control" placeholder="static/img/mi-foto.jpg">
    <small class="text-muted">Dejar vacío para usar el placeholder.</small>
  </div>
  <div class="mb-3">
    <label class="form-label">Imagen (ruta en static/img)</label>
    <input type="text" name="image" class="form-control" placeholder="img/miimagen.jpg" value="{{ product.image if product else '' }}">
    <div class="form-text">O seleccioná una imagen desde tu dispositivo (galería / PC).</div>
  </div>
  <div class="mb-3">
    <label class="form-label">Subir imagen (desde galería / PC)</label>
    <input type="file" name="image_file" accept="image/*" class="form-control">
    <div class="form-text">Formatos JPG/PNG. Si subes una imagen, se guardará en static/img/uploads/ y se usará en el producto.</div>
  </div>
  <div class="col-12 text-end">
    <a class="btn btn-outline-secondary" href="{{ url_for('admin') }}">Cancelar</a>
    <button class="btn btn-success">Guardar</button>
  </div>

{% endblock %}
